<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andre Boufama - Portfolio</title>
    <meta name="description" content="Andre Boufama - Mechanical Engineering Student at Cornell University. Portfolio showcasing innovative hardware projects, sustainable engineering solutions, and technical expertise.">
    <meta name="keywords" content="Andre Boufama, Mechanical Engineering, Cornell University, Engineering Portfolio, Hardware Projects, Sustainable Engineering">
    <meta name="author" content="Andre Boufama">
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono:wght@400&display=swap" rel="stylesheet">
    
    <!-- Structured data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Andre Boufama",
        "jobTitle": "Mechanical Engineering Student",
        "worksFor": {
            "@type": "Organization",
            "name": "Cornell University"
        },
        "email": "andre.boufama@gmail.com",
        "telephone": "+1-603-285-5685",
        "url": "https://www.linkedin.com/in/andre-boufama-7b2aa8240/"
    }
    </script>
</head>
<body>
    <!-- Header Section -->
    <header class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <div class="hero-title-section">
                    <div class="title-wrapper">
                        <h1 class="main-title">Andre Boufama</h1>
                        <p class="subtitle">Portfolio</p>
                    </div>
                    <div class="contact-info">
                        <a href="#" class="contact-link email-copy" aria-label="Copy email to clipboard" data-email="andre.boufama@gmail.com">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            andre.boufama@gmail.com
                        </a>
                        <a href="https://www.linkedin.com/in/andre-boufama-7b2aa8240/" target="_blank" class="contact-link" aria-label="Visit Andre Boufama's LinkedIn profile" rel="noopener noreferrer">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                            LinkedIn
                        </a>
                        <a href="Resume.pdf" class="contact-link" aria-label="Download Andre Boufama's resume" target="_blank" rel="noopener noreferrer">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                                <polyline points="10,9 9,9 8,9"/>
                            </svg>
                            Resume
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Projects Section -->
    <main class="container">
        <!-- Hardware Section -->
        <section class="project-section">
            <h2 class="section-title">Hardware Projects <span class="section-subtitle">- [Designed Made and Tested by Me]</span></h2>
            <div class="projects-grid">
                <!-- Modular Hydroponics System -->
                <a href="projects/hydroponics.html" class="project-card-link" aria-label="View Modular Hydroponics System project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/Hydroponics.png" alt="Modular Hydroponics System - Award-winning sustainable food production system" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>Modular Hydroponics System</h3>
                            <p class="project-tags">
                                <span class="tag award-tag">Award Winner</span>
                                <span class="tag">Sustainability</span>
                                <span class="tag">IoT</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- VTOL UAV -->
                <a href="projects/vtol.html" class="project-card-link" aria-label="View VTOL UAV project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/VTOL.png" alt="VTOL UAV - Vertical Takeoff and Landing unmanned aerial vehicle" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>VTOL UAV</h3>
                            <p class="project-tags">
                                <span class="tag">Aerospace</span>
                                <span class="tag">Flight Control Systems</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- VEX Robot -->
                <a href="projects/vex.html" class="project-card-link" aria-label="View World Qualifying VEX Robot project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/VEX Robot.png" alt="World Qualifying VEX Robot - Competition robot with advanced odometry and autonomous navigation" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>World Qualifying VEX Robot</h3>
                            <p class="project-tags">
                                <span class="tag award-tag">Award Winner</span>
                                <span class="tag">Mechatronics</span>
                                <span class="tag">Odometry</span>
                                <span class="tag">C++</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- Rover -->
                <a href="projects/rover.html" class="project-card-link" aria-label="View Autonomous Heavy Lift Rover project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/Rover.png" alt="Autonomous Heavy Lift Rover - Advanced rover for heavy payload transportation" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>Autonomous Heavy Lift Rover</h3>
                            <p class="project-tags">
                                <span class="tag">Mechatronics</span>
                                <span class="tag">Autonomous Navigation</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- CoreXY 3D Printer -->
                <a href="projects/3dprinter.html" class="project-card-link" aria-label="View Large format FDM 3D Printer project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/3DPrinter.png" alt="Large format FDM 3D Printer - Custom CoreXY design donated to Berwick Academy" class="project-image printer-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>Large format FDM 3D Printer</h3>
                            <p class="project-tags">
                                <span class="tag">Python</span>
                                <span class="tag">Precision Engineering</span>
                                <span class="tag">Mains Voltage Wiring</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- Automatic Chicken Coop Door -->
                <a href="projects/chickencoop.html" class="project-card-link" aria-label="View Automatic Chicken Coop Door project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/ChickenDoor.png" alt="Automatic Chicken Coop Door - IoT-enabled automated door system" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>Automatic Chicken Coop Door</h3>
                            <p class="project-tags">
                                <span class="tag">Python</span>
                                <span class="tag">IoT</span>
                                <span class="tag">Sensor Integration</span>
                            </p>
                        </div>
                    </div>
                </a>
            </div>
        </section>

        <!-- Design Section -->
        <section class="project-section">
            <h2 class="section-title">Design Projects <span class="section-subtitle">- [Designed and Rendered by Me]</span></h2>
            <div class="projects-grid">
                <!-- Drone Swarm -->
                <a href="projects/drone.html" class="project-card-link" aria-label="View General Purpose Outdoor Quadcopter project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/Drone.png" alt="General Purpose Outdoor Quadcopter - Professional-grade drone with advanced flight control systems" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>General Purpose Outdoor Quadcopter</h3>
                            <p class="project-tags">
                                <span class="tag">Finite Element Analysis</span>
                                <span class="tag">Systems Design</span>
                                <span class="tag">Fusion360</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- Overpass Oasis -->
                <a href="projects/overpass.html" class="project-card-link" aria-label="View Suspension Bridge Pedestrian Walkway project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/OverpassOasis.png" alt="Suspension Bridge Pedestrian Walkway - Innovative bridge design with structural analysis" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>Suspension Bridge Pedestrian Walkway</h3>
                            <p class="project-tags">
                                <span class="tag award-tag">Award Winner</span>
                                <span class="tag">Finite Element Analysis</span>
                                <span class="tag">Fusion360</span>
                                <span class="tag">Blender</span>
                            </p>
                        </div>
                    </div>
                </a>

                <!-- Genie RAG Agent -->
                <a href="projects/genie.html" class="project-card-link" aria-label="View RAG LLM for Inventory Management project details" tabindex="0">
                    <div class="project-card">
                        <div class="project-image-container">
                            <img src="images/GenieChatbot.png" alt="RAG LLM for Inventory Management - AI-powered inventory system with fine-tuned models" class="project-image" loading="lazy" width="300" height="200">
                        </div>
                        <div class="project-info">
                            <h3>RAG LLM for Inventory</h3>
                            <p class="project-tags">
                                <span class="tag">Databricks</span>
                                <span class="tag">LLM Fine Tuning</span>
                            </p>
                        </div>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <!-- Skills Section -->
    <section class="skills-section" aria-label="Technical Skills">
        <div class="container">
            <h2 class="section-title">Skills</h2>
            <div class="skills-grid" role="list" aria-label="Skills categories">
                <div class="skill-category">
                    <h3>Programming</h3>
                    <p>Python, C#, C/C++, HTML/CSS, JavaScript, React Native</p>
                </div>
                <div class="skill-category">
                    <h3>CAD & 3D Design</h3>
                    <p>Autodesk Fusion 360, Blender</p>
                </div>
                <div class="skill-category">
                    <h3>Hardware</h3>
                    <p>Raspberry Pi, Arduino, VTOL UAV Build</p>
                </div>
                <div class="skill-category">
                    <h3>Data Engineering</h3>
                    <p>Azure SQL, Jupyter Notebook, Pandas, Databricks</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Bio Section -->
    <section class="bio-section">
        <div class="container">
            <div class="bio-content">
                <div class="bio-image">
                    <img src="images/Headshot.png" alt="Andre Boufama professional headshot" class="bio-headshot" loading="lazy" width="200" height="200">
                </div>
                <div class="bio-text">
                    <p>I'm a MechE student at <span class="cornell-text">Cornell University</span>. When I'm not working on my projects, I'm probably skiing, golfing, watching movies, or eating a lot of food :)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
        </div>
    </footer>

    <script>
        // Email copy to clipboard functionality
        document.addEventListener('DOMContentLoaded', function() {
            const emailCopyLinks = document.querySelectorAll('.email-copy');
            emailCopyLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const email = this.getAttribute('data-email');
                    
                    // Copy to clipboard
                    navigator.clipboard.writeText(email).then(() => {
                        showCopyIndicator(this);
                    }).catch(err => {
                        console.error('Failed to copy email: ', err);
                        // Fallback for older browsers
                        const textArea = document.createElement('textarea');
                        textArea.value = email;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        showCopyIndicator(this);
                    });
                });
            });
            
            function showCopyIndicator(element) {
                // Create popup indicator
                const indicator = document.createElement('div');
                indicator.textContent = 'Copied!';
                indicator.style.position = 'absolute';
                indicator.style.top = '50%';
                indicator.style.right = '100%';
                indicator.style.transform = 'translateY(-50%)';
                indicator.style.marginRight = '8px';
                indicator.style.backgroundColor = 'var(--card-bg)';
                indicator.style.color = 'var(--text-primary)';
                indicator.style.padding = '2px 6px';
                indicator.style.borderRadius = '3px';
                indicator.style.fontSize = '0.65rem';
                indicator.style.border = 'none';
                indicator.style.boxShadow = '0 1px 4px rgba(0, 0, 0, 0.1)';
                indicator.style.pointerEvents = 'none';
                indicator.style.zIndex = '1000';
                indicator.style.opacity = '0';
                indicator.style.transition = 'opacity 0.2s ease';
                indicator.style.whiteSpace = 'nowrap';
                
                // Position relative to the clicked element
                element.style.position = 'relative';
                element.appendChild(indicator);
                
                // Show indicator
                requestAnimationFrame(() => {
                    indicator.style.opacity = '1';
                });
                
                // Remove after 1.5 seconds
                setTimeout(() => {
                    indicator.style.opacity = '0';
                    setTimeout(() => {
                        if (indicator.parentNode) {
                            indicator.parentNode.removeChild(indicator);
                        }
                    }, 200);
                }, 1500);
            }
        });

        // Mouse-following glow effect for main title
        document.addEventListener('DOMContentLoaded', function() {
            const mainTitle = document.querySelector('.main-title');
            if (mainTitle) {
                // Create glow element
                const glowElement = document.createElement('div');
                glowElement.style.position = 'absolute';
                glowElement.style.width = '300px';
                glowElement.style.height = '300px';
                glowElement.style.background = 'radial-gradient(circle, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.2) 30%, transparent 70%)';
                glowElement.style.borderRadius = '50%';
                glowElement.style.pointerEvents = 'none';
                glowElement.style.zIndex = '1';
                glowElement.style.transition = 'opacity 0.2s ease-out';
                glowElement.style.opacity = '0';
                glowElement.style.transform = 'translate(-50%, -50%)';
                
                mainTitle.style.position = 'relative';
                mainTitle.style.zIndex = '2';
                mainTitle.appendChild(glowElement);
                
                // Mouse move handler
                mainTitle.addEventListener('mousemove', function(e) {
                    const rect = mainTitle.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    glowElement.style.left = x + 'px';
                    glowElement.style.top = y + 'px';
                    glowElement.style.opacity = '1';
                });
                
                mainTitle.addEventListener('mouseleave', function() {
                    glowElement.style.opacity = '0';
                });
            }
        });

        // Project card expansion system - COMPLETE REWRITE
        let activeProject = null;
        const overlay = document.createElement('div');
        overlay.className = 'project-overlay';
        document.body.appendChild(overlay);

        document.querySelectorAll('.project-card-link').forEach(link => {
            // Handle both click and keyboard events
            const handleProjectOpen = (e) => {
                // Allow keyboard activation with Enter or Space
                if (e.type === 'keydown' && e.key !== 'Enter' && e.key !== ' ') {
                    return;
                }
                e.preventDefault();
                
                if (activeProject) return;
                
                const card = link.querySelector('.project-card');
                const rect = card.getBoundingClientRect();
                
                // Store original position for reverse animation
                const originalTransform = card.style.transform;
                const originalPosition = {
                    left: rect.left,
                    top: rect.top,
                    width: rect.width,
                    height: rect.height
                };
                
                // Freeze page (prevent layout shift by compensating scrollbar width)
                const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
                if (scrollbarWidth > 0) {
                    document.body.style.paddingRight = scrollbarWidth + 'px';
                }
                document.body.style.overflow = 'hidden';
                overlay.classList.add('active');
                
                // Keep card visible and make non-interactable
                link.style.opacity = '1';
                link.style.zIndex = '1001';
                link.style.pointerEvents = 'none';
                
                // Add subtle hover effect to indicate interactivity
                card.style.cursor = 'pointer';
                
                // Fade everything else (but NOT the selected card or its parent section)
                setTimeout(() => {
                    document.querySelectorAll('.project-card-link').forEach(otherLink => {
                        if (otherLink !== link) {
                            otherLink.style.opacity = '0';
                        }
                    });
                    const hero = document.querySelector('.hero');
                    const skills = document.querySelector('.skills-section');
                    if (hero) hero.style.opacity = '0';
                    if (skills) skills.style.opacity = '0';
                    document.querySelectorAll('.section').forEach(section => {
                        if (!section.contains(link)) {
                            section.style.opacity = '0';
                        }
                    });
                }, 50);
                
                // Scale and center card
                setTimeout(() => {
                    card.classList.add('active');
                    // Ensure card stays above all fades
                    card.style.position = 'relative';
                    card.style.zIndex = '1003';
                    card.style.willChange = 'transform';
                    
                    const cardCenterX = rect.left + rect.width / 2;
                    const cardCenterY = rect.top + rect.height / 2;
                    const arrowWidth = 50;
                    const gap = 15;
                    const topLeftX = 30 + arrowWidth + gap; // Position card to the right of arrow
                    const topLeftY = 50; // Position card 50px from top edge
                    const offsetX = topLeftX - rect.left;
                    const offsetY = topLeftY - rect.top;
                    
                    card.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(1.15)`;

                    // Create vertical gallery system - wait for card animation to complete
                    setTimeout(async () => {
                        await createProjectGallery(link, card, topLeftX, topLeftY, rect);
                    }, 600); // Wait for card animation duration

                    activeProject = { 
                        card, 
                        link, 
                        gallery: null,
                        backButton: null,
                        projectDetails: null,
                        originalTransform,
                        originalPosition 
                    };
                }, 100);
            };
            
            // Add both click and keyboard event listeners
            link.addEventListener('click', handleProjectOpen);
            link.addEventListener('keydown', handleProjectOpen);
        });
        
        // Close functionality
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && activeProject) {
                // Fade out project details and back button first
                if (activeProject.projectDetails) {
                    activeProject.projectDetails.style.transition = 'opacity 0.2s ease';
                    activeProject.projectDetails.style.opacity = '0';
                }
                if (activeProject.backButton) {
                    activeProject.backButton.style.transition = 'opacity 0.2s ease';
                    activeProject.backButton.style.opacity = '0';
                }
                
                // Roll up gallery after fade starts
                setTimeout(() => {
                    if (activeProject.gallery) {
                        activeProject.gallery.style.transition = 'height 0.3s ease-in';
                        activeProject.gallery.style.height = '0';
                        activeProject.gallery.style.overflowY = 'hidden';
                    }
                    
                    // Close project after roll-up completes
                    setTimeout(() => {
                        closeProject();
                    }, 300);
                }, 50);
            }
        });
        
        function closeProject() {
            if (!activeProject) return;
            
            // Remove gallery, back button, and project details immediately
            if (activeProject.gallery) {
                activeProject.gallery.remove();
            }
            if (activeProject.backButton) {
                activeProject.backButton.remove();
            }
            if (activeProject.projectDetails) {
                activeProject.projectDetails.remove();
            }
            
            // Reverse: keep card on top, move back first
            activeProject.link.style.zIndex = '1001';
            activeProject.card.style.position = 'relative';
            activeProject.card.style.zIndex = '1003';
            activeProject.card.classList.remove('active');
            activeProject.card.style.transform = activeProject.originalTransform;

            const onTransitionEnd = (ev) => {
                if (ev.propertyName !== 'transform') return;
                activeProject.card.removeEventListener('transitionend', onTransitionEnd);
                
                // Fade everything back in only after transform completes
                document.querySelectorAll('.project-card-link').forEach(otherLink => {
                    if (otherLink !== activeProject.link) {
                        otherLink.style.opacity = '1';
                    }
                });
                const hero = document.querySelector('.hero');
                const skills = document.querySelector('.skills-section');
                if (hero) hero.style.opacity = '1';
                if (skills) skills.style.opacity = '1';
                document.querySelectorAll('.section').forEach(section => {
                    // Do not touch the section containing the active link to avoid flash
                    if (!section.contains(activeProject.link)) {
                        section.style.opacity = '1';
                    }
                });
                
                // Smoothly fade overlay away beneath the card to avoid flash
                overlay.style.backgroundColor = 'transparent';
                const onOverlayFade = () => {
                    overlay.removeEventListener('transitionend', onOverlayFade);
                    // Reset link and overlay after overlay is fully transparent
                    activeProject.link.style.pointerEvents = '';
                    activeProject.link.style.zIndex = '';
                    activeProject.card.style.position = '';
                    activeProject.card.style.zIndex = '';
                    activeProject.card.style.willChange = '';
                    overlay.classList.remove('active');
                    overlay.style.backgroundColor = '';
                    document.body.style.overflow = '';
                    document.body.style.paddingRight = '';
                    activeProject = null;
                };
                overlay.addEventListener('transitionend', onOverlayFade);
            };
            
            // Attach listener to ensure we mirror the forward animation timing
            activeProject.card.addEventListener('transitionend', onTransitionEnd);
        }
        
        // Gallery creation function
        async function createProjectGallery(link, card, topLeftX, topLeftY, rect) {
            // Get project name from link href
            const projectPath = link.getAttribute('href');
            const projectName = projectPath.split('/').pop().replace('.html', '');
            
            // Create gallery container
            const gallery = document.createElement('div');
            gallery.className = 'project-gallery';
            gallery.style.position = 'fixed';
            gallery.style.top = '0';
            gallery.style.left = '0';
            gallery.style.width = '100%';
            gallery.style.height = '0'; // Start with no height
            gallery.style.overflowY = 'hidden'; // Hide overflow during animation
            gallery.style.overflowX = 'hidden';
            gallery.style.zIndex = '1000';
            gallery.style.backgroundColor = 'transparent';
            gallery.style.paddingTop = (topLeftY + rect.height * 1.15 + 20) + 'px'; // Start below main card
            // Account for scaling offset - card's visual left edge after scaling
            const cardVisualLeft = topLeftX - (rect.width * 0.15) / 2; // Subtract half the width increase from scaling
            gallery.style.paddingLeft = cardVisualLeft + 'px';
            gallery.style.display = 'block';
            gallery.style.transition = 'height 0.4s ease-out'; // Smooth height animation
            
            // Add fade effect near main card - start 30px below bottom edge of card
            const cardBottomEdge = rect.height * 1.15; // Bottom edge of scaled card
            const fadeStart = cardBottomEdge + 30; // 30px below bottom edge
            const fadeDistance = 20; // pixels for fade
            const fadeEnd = fadeStart + fadeDistance;
            // Don't apply mask during height animation - will be applied after
            
            // Hide scrollbar
            gallery.style.scrollbarWidth = 'none'; // Firefox
            gallery.style.msOverflowStyle = 'none'; // IE/Edge
            gallery.style.webkitScrollbar = 'none'; // Webkit
            
            // Create gallery content (images only)
            const galleryContent = document.createElement('div');
            galleryContent.style.display = 'flex';
            galleryContent.style.flexDirection = 'column';
            galleryContent.style.gap = '2rem';
            galleryContent.style.width = (rect.width * 1.15) + 'px';
            
            // Don't add the main card - it's already positioned above
            
            // Load additional images for this project
            await loadProjectImages(projectName, galleryContent);
            
            gallery.appendChild(galleryContent);
            document.body.appendChild(gallery);
            
            // Create project details section (separate from gallery)
            const projectDetails = document.createElement('div');
            projectDetails.className = 'project-details';
            projectDetails.style.position = 'fixed';
            // Calculate position to align project details text with card's top border
            const projectDetailsPadding = 32; // 2rem = 32px
            const scaledHeight = rect.height * 1.15;
            const heightIncrease = scaledHeight - rect.height;
            const visualTopY = topLeftY - (heightIncrease / 2);
            // Position container so text content aligns with card's top border
            projectDetails.style.top = '20px';
            projectDetails.style.left = (cardVisualLeft + rect.width * 1.15 + 30) + 'px'; // To the right of card
            projectDetails.style.right = '0'; // Stretch to right edge of screen
            projectDetails.style.maxHeight = '90vh';
            projectDetails.style.overflowY = 'auto';
            projectDetails.style.scrollbarWidth = 'none'; // Firefox
            projectDetails.style.msOverflowStyle = 'none'; // IE/Edge
            projectDetails.style.webkitScrollbar = 'none'; // Webkit
            projectDetails.style.zIndex = '1001';
            projectDetails.style.padding = '1.5rem';
            projectDetails.style.backgroundColor = 'transparent';
            
            // Add project details content based on project
            let projectContent = getProjectDetails(projectName);
            const scrollHintHtml = `
                <div style="background: rgba(0, 0, 0, 0.05); border-radius: 4px; padding: 0.5rem 0.75rem; margin-bottom: 1rem; font-size: 0.85rem; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                    <div style="animation: bounce 2s infinite;">↓</div>
                    <span>Scroll down to see more details</span>
                </div>
            `;
            if (!projectContent.includes('Scroll down to see more details')) {
                projectContent = scrollHintHtml + projectContent;
            }
            projectDetails.innerHTML = projectContent;
            projectDetails.style.opacity = '0';
            projectDetails.style.transition = 'opacity 0.4s ease';
            
            document.body.appendChild(projectDetails);
            
            // Animate gallery unrolling from card
            requestAnimationFrame(() => {
                // Ensure DOM is ready before triggering height animation
                setTimeout(() => {
                    gallery.style.height = '100%'; // Expand to full height
                    gallery.style.overflowY = 'auto'; // Enable scrolling after animation
                }, 10);
                
                // Fade in project details
                setTimeout(() => {
                    projectDetails.style.opacity = '1';
                }, 200);
                
                // Apply fade mask after height animation completes
                setTimeout(() => {
                    gallery.style.maskImage = `linear-gradient(to bottom, transparent 0%, transparent ${fadeStart}px, black ${fadeEnd}px, black 100%)`;
                    gallery.style.webkitMaskImage = `linear-gradient(to bottom, transparent 0%, transparent ${fadeStart}px, black ${fadeEnd}px, black 100%)`;
                }, 410); // Wait for height animation to complete (400ms + 10ms delay)
            });
            
            // Add back button
            const backButton = document.createElement('div');
            backButton.className = 'back-button';
            backButton.innerHTML = '←';
            backButton.style.position = 'fixed';
            backButton.style.top = (topLeftY - 19) + 'px';
            backButton.style.left = '15px';
            backButton.style.width = '40px';
            backButton.style.height = '40px';
            backButton.style.backgroundColor = 'var(--card-bg)';
            backButton.style.borderRadius = '50%';
            backButton.style.border = '1px solid var(--border-color)';
            backButton.style.display = 'flex';
            backButton.style.alignItems = 'center';
            backButton.style.justifyContent = 'center';
            backButton.style.fontSize = '20px';
            backButton.style.fontWeight = '400';
            backButton.style.color = 'var(--text-primary)';
            backButton.style.cursor = 'pointer';
            backButton.style.zIndex = '1002';
            backButton.style.opacity = '0';
            backButton.style.transition = 'opacity 0.25s ease, color 0.15s ease, background-color 0.15s ease, transform 0.15s ease';
            backButton.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.1)';
            document.body.appendChild(backButton);
            
            // Fade in back button
            requestAnimationFrame(() => {
                backButton.style.opacity = '1';
            });
            
            backButton.addEventListener('click', () => {
                // Fade out project details and back button first
                if (activeProject.projectDetails) {
                    activeProject.projectDetails.style.transition = 'opacity 0.2s ease';
                    activeProject.projectDetails.style.opacity = '0';
                }
                if (activeProject.backButton) {
                    activeProject.backButton.style.transition = 'opacity 0.2s ease';
                    activeProject.backButton.style.opacity = '0';
                }
                
                // Roll up gallery after fade starts
                setTimeout(() => {
                    if (activeProject.gallery) {
                        activeProject.gallery.style.transition = 'height 0.3s ease-in';
                        activeProject.gallery.style.height = '0';
                        activeProject.gallery.style.overflowY = 'hidden';
                    }
                    
                    // Close project after roll-up completes
                    setTimeout(() => {
                        closeProject();
                    }, 300);
                }, 50);
            });
            
            backButton.addEventListener('mouseenter', () => {
                backButton.style.color = 'var(--text-primary)';
                backButton.style.backgroundColor = 'var(--darker-bg)';
                backButton.style.transform = 'scale(1.05)';
            });
            
            backButton.addEventListener('mouseleave', () => {
                backButton.style.color = 'var(--text-primary)';
                backButton.style.backgroundColor = 'var(--card-bg)';
                backButton.style.transform = 'scale(1)';
            });
            
            // Store references
            activeProject.gallery = gallery;
            activeProject.backButton = backButton;
            activeProject.projectDetails = projectDetails;
        }
        
        // Get project details function
        function getProjectDetails(projectName) {
            const projectDetails = {
                '3dprinter': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Large-Scale CoreXY 3D Printer</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Custom-designed large-scale CoreXY FDM 3D printer running Klipper firmware which I donated to my high school makerspace.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Technical Specifications</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>CoreXY motion system for improved print quality and reduced moving mass</li>
                        <li>Large format build volume (500x500x500mm) for oversized prints</li>
                        <li>Python-based control system with custom firmware modifications</li>
                        <li>Dual gear extruder with direct drive for precise filament control</li>
                        <li>Heated bed with PEI print surface for excellent adhesion</li>
                        <li>Linear rails and precision lead screws for smooth motion</li>
                        <li>Enclosed design with temperature control and filtration for more demanding materials</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Design Process</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">This printer was designed based on the V-Core 3 3D printer. Using Autodesk Fusion 360, manny modifications were applied to the original design. I swapped out extrusions with carbon fiber tubes to decrease weight, changed the linear rails used on all axes, and swapped the extruder wires for a custom USB can bus toolboard pcb. The extruder assembly was rebuilt from the ground up. Using a metal 3D printing service, I remodeled all extruder parts in titanium to save weight and boost rigidity, while also providing temperature resistance.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Electrical Systems</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Mains wiring can be very dangerous so I was very careful to ground the frame and ensure every operation I did was correct with an electrician friend of mine. Using DIN rails to divide high voltage and low voltage sections, I created a fully enclosed electronics bay with large cooling fans and filters to prevent kids from reaching into the wiring.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcomes & Impact</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">Successfully donated to Berwick Academy makerspace and trained the people working there, providing students with access to large-format 3D printing capabilities. The printer has been used for various educational projects including architectural models, engineering prototypes, and art installations. It has significantly expanded the school's prototyping capabilities by allowing students to print objects as large as they want.</p>
                `,
                'hydroponics': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Modular Hydroponics System</h2>
                    
                    <div style="background: rgba(0, 0, 0, 0.05); border-radius: 4px; padding: 0.5rem 0.75rem; margin-bottom: 1rem; font-size: 0.85rem; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                        <div style="animation: bounce 2s infinite;">↓</div>
                        <span>Scroll down to see more details</span>
                    </div>
                    
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">This award-winning modular hydroponics system was designed for sustainable food production and educational use. <a href="https://www.instructables.com/Top-Instructables-of-2024/" target="_blank" rel="noopener noreferrer" style="background: rgba(38, 161, 105, 0.2); padding: 0.1rem 0.3rem; border-radius: 3px; color: var(--success-color); font-weight: 500; text-decoration: none;">Featured in top Instructables designs for 2024</a> and <a href="https://www.instructables.com/contest/greenfuture/" target="_blank" rel="noopener noreferrer" style="background: rgba(38, 161, 105, 0.2); padding: 0.1rem 0.3rem; border-radius: 3px; color: var(--success-color); font-weight: 500; text-decoration: none;">First Prize Winner in the Green Future Design Contest</a>. Built as part of my "Engineering for the Future" class, the system features a tree-like structure with removable branch modules for easy maintenance and expansion.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Design Innovation</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Tree-inspired architecture with 4" central PVC trunk and 3" branch modules</li>
                        <li>Quick-disconnect joints enabling easy cleaning and maintenance</li>
                        <li>Modular design allowing for scalable expansion and customization</li>
                        <li>3D-printed components using PETG filament for watertight seals</li>
                        <li>Fountain-style water circulation system for aesthetic appeal</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Technical Features</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Arduino-based monitoring system with temperature sensors</li>
                        <li>Custom-designed plant holders with Rockwool growing medium</li>
                        <li>Water circulation pump with emergency drainage system</li>
                        <li>Precision-drilled holes and marine sealant for leak prevention</li>
                        <li>Compact 2x2x2' footprint suitable for educational environments</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Sustainability Impact</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Hydroponics systems use up to 95% less water than traditional agriculture while enabling year-round growing seasons. This system reduces food travel distances and provides fresh produce in urban environments, making it ideal for schools and educational facilities.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Development Process</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">Inspired by a local aquaponics farm visit, I designed this system using Fusion 360 and conducted extensive testing to ensure watertight seals. The project involved multiple prototyping iterations and rigorous leak testing, resulting in a fully functional educational hydroponics system.</p>
                `,
                'vex': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">World Qualifying VEX Robot</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Competition robot designed for VEX Change Up competition. Features advanced odometry, autonomous navigation, and precision manipulation systems programmed in C++.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Mechanical Design</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Advanced odometry system using two encoders and gyroscope for precise positioning</li>
                        <li>X drive configuration allows for movement in any direction along the xy plane and rotation at the same time</li>
                        <li>Fine tuned ball intake with ratchets allowing for two motors to create two separate ball paths without a loss of processing speed</li>
                        <li>Custom gear ratios for optimal speed and torque balance</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Software Architecture</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The robot's software is built on C++ architecture. The controls for the remote controlled portion of the competition are relatively simple, but the autonomous section enables more complex code. Using two encoders with omni wheels positioned at a right angle from each other combined with a gyroscopic sensor, we could approximate every motion of the robot as a combination of arcs. By adding these tiny arcs in relation to the global xy plane, we can always know the physical position and rotation of the robot on the 2D arena. In conjunction with PID controls, we can maximize our robot speed while always being able to course correct.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Competition Performance</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The competition was moved online this year due to covid, but our robot placed number 1 in my home state, allowing us to qualify for the world championship, which also took place online.</p>
                `,
                'drone': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">General Purpose Outdoor Quadcopter</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Professional-grade quadcopter designed for outdoor operations with advanced flight control systems, payload capacity, and autonomy</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Design & Engineering</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Finite element analysis for structural optimization and weight reduction</li>
                        <li>Carbon fiber frame with titanium mounting points for durability</li>
                        <li>Flight controller connects to raspberry pi for ROS 2</li>
                        <li>Advanced battery management system for extended flight time</li>
                        <li>Extremely lightweight novel frame allowing for arm mounting hardware to also add rigidity to the baseplate</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Design</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The drone was designed over five iterations in fusion and is still in development. The drone pictured has not been manufactured but the testbed for the electronics has been made and is running with the same motors and battery.</p>
                    
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The core design is built upon a single 4mm carbon fiber sheet cut to size connected by clamps which secure the arms and also add rigidity to the frame. This allows for the frame not including motors to be under 200g, enabling flight times of well over one hour.</p>
                    
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Although this specific design isn't compact, we want to make the next iteration foldable for easier deployment and transportation. This specific quadcopter has the goal of being a testbed for our autonomous systems while we make more and more of the drone in house and move away from off the shelf parts. The drone render shown is not completely done in house but it's a stepping stone between the pictured test bed and the final product.</p>
                `,
                'rover': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Autonomous Heavy Lift Rover</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">Advanced autonomous rover designed for heavy payload transportation and manipulation in challenging terrain. Features robust mechanical design and environment resistant construction.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Mechanical Systems</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Six-wheel drive system with independent suspension for terrain adaptability</li>
                        <li>Heavy-duty chassis capable of carrying payloads up to 50kg</li>
                        <li>Custom PETG flexible wheels allow for tireless operations without risk of puncture</li>
                        <li>Custom gear herringbone gear reduction system for optimal torque and speed</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Mechanical Design</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The design is a modified rocker bogie system inspired by the Curiosity Mars rover. Instead of having all six wheels be based on the same pivot, I implemented an offset four bar linkage (non parallel bars) allowing for an arc movement path of the front two wheels on each side. The back wheel on each side is connected by a central rocker perpendicular to the rockers in the front. This completely independent portion of the rover allows for the same contact principles as the rocker bogie system without a need for linkage between the two sides of the rover, further simplifying and making the design more robust.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Control Systems</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">The rover's control system is built on a raspberry pi 3B+ running python with custom nodes for navigation, manipulation, and communication. This pi, connected to an array of sensors and six motor controllers each independently controlling a wheel, allows for navigation of any terrain at high speeds.</p>
                `,
                'vtol': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">VTOL UAV Development</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem;">Vertical Takeoff and Landing (VTOL) unmanned aerial vehicle designed for versatile operations combining the efficiency of fixed-wing flight with the ease of a quadcopter.</p>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Aerospace Design</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li>Hybrid design combining fixed-wing and rotary-wing configurations</li>
                        <li>Lightweight composite core with 3D printed and foam framing</li>
                        <li>Advanced propulsion system precise servo driven PID controlled motor pods</li>
                        <li>Integrated payload bay for various mission-specific equipment</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Flight Control Systems</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem;">The VTOL features a custom flight controller. The system includes GPS guidance, radio control systems, and control surfaces along the wing and tail. The bicopter design in hover mode requires rapid PID loops to maintain stability. A bicopter is fundamentally more unstable than a quadcopter because it's underactuated, since two rotors must control three rotational axes (pitch, roll, yaw) by tilting, which causes cross-coupled effects where adjusting one axis unintentionally affects the others. This makes PID tuning very difficult.</p>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Mission Capabilities</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem;">Designed mostly for cargo delivery, VTOL fundamentally allows there to be no tradeoff between ease of takeoff/landing and flight efficiency.</p>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcomes & Impact</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">Completed flight testing and validation of both VTOL and normal flight mode. Presented at the Berwick Academy Innovation Celebration in 2020. Before final validation could occur, the craft suffered a devastating crash snapping both propellors.</p>
                `,
                'overpass': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Overpass Oasis: Bridging Nature With Innovation</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem;">A cable‑stayed pedestrian bridge concept spanning the Cochecho River in Dover, NH, designed to pair practical urban connectivity with sustainability. It shortens a 2,500‑ft pedestrian detour to roughly 200 ft while integrating walkable solar deck tiles, subtle handrail lighting, and planted green ramps that bring vegetation up through the walkway — a concept recognized with <a href="https://www.instructables.com/contest/makeitbridge2023/" target="_blank" rel="noopener noreferrer" style="background: rgba(38, 161, 105, 0.2); padding: 0.1rem 0.3rem; border-radius: 3px; color: var(--success-color); font-weight: 500; text-decoration: none;">First Prize in the Autodesk Instructables Make It Bridge Challenge</a>.</p>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Author & Context</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem;">Author: Andre ("andre_125"). Entry for the Instructables "Make It Bridge" challenge; concept‑to‑render workflow using Fusion 360 + Blender.</p>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Purpose & Site</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Location</strong>: Cochecho River, Dover, NH — near public pool, Great Bay Community Rowing, and the Children's Museum.</li>
                        <li><strong>Problem Solved</strong>: Shortens a ~2,500‑ft pedestrian detour to ~200 ft, stitching together two rapidly developing riverbanks.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Design at a Glance</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Bridge Type</strong>: Pedestrian cable‑stayed span with back‑leaning concrete/steel pylons; cables support a steel‑I‑beam deck.</li>
                        <li><strong>Span & Deck</strong>: ~200 ft deck using five W21 beams with W16 cross‑ties; aluminum walking plates spaced for thermal expansion.</li>
                        <li><strong>Aesthetics & Access</strong>: Sharp, tilted pylons; continuous handrails; ADA‑compliant green ramp with planted grates.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Sustainability & Self‑Power</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Solar Deck</strong>: Walkable PV surface (~2.2 m × 63 m ≈ 138.6 m²); ~20% efficiency, peak ≈ 27 kW.</li>
                        <li><strong>Loads</strong>: Deck LEDs (~48 × 5 W ≈ 240 W) + floodlights (4 × 400 W ≈ 1.6 kW) ⇒ ~1.84 kW at night.</li>
                        <li><strong>Energy Balance</strong>: Even with conservative winter daylight (~3.5 "full sun" hrs), daily PV output exceeds nightly demand; surplus can feed the grid.</li>
                        <li><strong>Materials</strong>: Preference for recycled steel (EAF‑sourced where possible) and aluminum; concrete mixes enhanced with SCMs (fly ash, slag).</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Sensors & Lighting</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Monitoring</strong>: Temperature sensors (in‑concrete + ambient), vibrating‑wire strain gauges, and people counters at both ends.</li>
                        <li><strong>Lighting</strong>: Low‑profile deck LEDs + pylon floodlights; top beacons for aircraft; occupancy‑aware dimming.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Safety & Detailing</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Rail System</strong>: 45‑in code‑compliant guard (OSHA ≥ 42 in), water‑jet/plasma‑cut aluminum or stainless supports, looped modular handrails.</li>
                        <li><strong>Cable Hardware</strong>: Pylon plates with universal‑joint‑style anchors; simpler clamp mounts at deck level for easy service.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Constructability Notes</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>Pylons</strong>: Slip‑formed, post‑tensionable concrete built on site; back‑leaning geometry provides counter‑thrust to cable tension (no back‑stays needed for pedestrian loads).</li>
                        <li><strong>Deck</strong>: Recycled steel I‑beams; welded or bolted cross‑ties to accommodate expansion; bolt‑on walkable PV tiles.</li>
                        <li><strong>Green Ramp</strong>: Steel shell over a soil bed; shade‑tolerant groundcover (e.g., Japanese spurge) and climbers (e.g., English ivy) emerging through Voronoi‑pattern grates.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Process & Tools</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.2rem; padding-left: 1.5rem;">
                        <li><strong>CAD</strong>: Fusion 360 for parametric modeling; generative design explored in an early small‑bridge concept.</li>
                        <li><strong>Visualization</strong>: Blender import (via 3MF add‑on), BlenderKit materials, environment/terrain/water setup, particle‑based grass, added foliage.</li>
                        <li><strong>Iteration</strong>: Initial 3D‑printed footbridge concept was abandoned due to cost/scale and limited community impact; focus shifted to the river‑spanning solution.</li>
                    </ul>

                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcome</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">A community‑linking pedestrian bridge that is energy‑positive, sensor‑aware, and nature‑integrated — pairing practical connectivity with durable detailing and a lighter footprint.</p>
                `,
                'genie': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">RAG LLM for Inventory Management</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The goal was to design a Retrieval-Augmented Generation (RAG) Large Language Model system for intelligent inventory management and customer service. Natural language input would be converted to the correct SQL query to search for an item in the database based on the context of this question. This SQL query had to be correct, and also accompanied by an explanation of the results.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Technical Architecture</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Fine-tuned LLM models from Databricks optimized for inventory management tasks</li>
                        <li>Real-time data integration with existing inventory systems</li>
                        <li>Natural language processing for customer query understanding</li>
                        <li>Scalable cloud infrastructure for high availability</li>
                        <li>Advanced analytics and reporting capabilities</li>
                        <li>Chart generation with interactive visuals built in</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">AI & Machine Learning</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The RAG approach ensures accurate and up-to-date information retrieval while maintaining conversational capabilities. By using RAG model, as long as the queries are correct, there is no risk for hallucination, as all data generated by the model will already be available on the company data storage system.</p>
                    
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">The harvest part of fine tuning was ensuring that SQL queries were correct. To do this, we generated 50 queries and example responses, and used these as benchmarks. At the same time, we picked a few to use for few shot training, giving the model a few base examples in the instruction code to further the success rate. Once the model could answer all fifty examples correctly, it was ready for deployment.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcomes & Impact</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">Successfully deployed limited beta environment. Leadership of the company presented at a conference with an ipad demo for investors. Application works through testflight and will be deployed for public use shortly.</p>
                `,
                'chickencoop': `
                    <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Project Overview</h2>
                    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">My goal for this project was to make a fully enclosed and marketable product which could automatically close a chicken coop door based on the lighting and time of day.</p>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Key Details</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                        <li>Rigid delrin frame to prevent predators getting in or weather affecting the coop</li>
                        <li>Fully enclosed box with motors, arduino, and wiring sealed and interactable with pliable plastic buttons</li>
                        <li>Arduino wifi capabilities allows for control from a distance or wireless operation based on lighting and time of day</li>
                        <li>Constant force springs concealed along the door to reduce the weight the motor has to pull along the rack</li>
                    </ul>
                    
                    <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcomes</h3>
                    <p style="color: var(--text-secondary); line-height: 1.6;">Smooth operating door which could run in a dusty environment without clogging or failure of gear contacts. I personally used the door for my flock of six chickens and it hasn't yet failed.</p>
                `
            };
            
            return projectDetails[projectName] || `
                <h2 style="font-size: 1.5rem; font-weight: 400; color: var(--text-primary); margin-bottom: 1rem;">Project Overview</h2>
                <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem;">This project showcases innovative engineering solutions and technical expertise. Detailed information about the project's design, implementation, and outcomes will be available soon.</p>
                
                <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Key Details</h3>
                <ul style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; padding-left: 1.5rem;">
                    <li>Custom engineering solutions</li>
                    <li>Innovative design approach</li>
                    <li>Technical implementation</li>
                    <li>Performance optimization</li>
                </ul>
                
                <h3 style="font-size: 1.2rem; font-weight: 400; color: var(--text-primary); margin-bottom: 0.8rem;">Outcomes</h3>
                <p style="color: var(--text-secondary); line-height: 1.6;">Project successfully completed with measurable improvements in efficiency, performance, and user experience. Results demonstrate the effectiveness of the engineering approach and technical solutions implemented.</p>
            `;
        }
        
        // Detect local file origin and provide fallback captions manifest
        const IS_FILE_ORIGIN = window.location.protocol === 'file:';
        const LOCAL_CAPTIONS = {
            'project-galleries/ExtraImages_3DPrinter/': {
                Image1: 'CoreXY mechanism assembly showing the belt configuration and motor mounting system',
                Image2: 'Custom extruder design with dual gear drive for improved filament control',
                Image3: 'Completed printer build with heated bed and print surface ready for operation'
            },
            'project-galleries/ExtraImages_Drone/': {
                Image1: 'CAD view of the V2 drone',
                Image2: 'Wireframe view of V2 drone',
                Image3: 'Novel arm mounting system to cut weight',
                Image4: 'Test bed for electronics running ROS2 communicating through MAVLink'
            },
            'project-galleries/ExtraImages_Hydroponics/': {
                Image1: 'Schematics for the final design allowing for offset layers of branches',
                Image2: 'Final design testing - Success! System operational with water circulation',
                Image3: 'Plant pods with Rockwool growing medium test fit',
                Image4: 'Test fit of quick disconnect seal'
            },
            'project-galleries/ExtraImages_Overpass/': {
                Image1: 'Early design using topgraphy optimization',
                Image2: 'Full Cad Model',
                Image3: 'View from the entrance of the walkway',
                Image4: 'Greenery growing under walkways'
            },
            'project-galleries/ExtraImages_VTOL/': {
                Image1: 'Early design using topgraphy optimization',
                Image2: 'Design layout without wing skin attatched',
                Image3: 'Rotating side pods enableing VTOL function',
                Image4: 'Full build'
            },
            'project-galleries/ExtraImages_GenieChatbot/': {
                Image1: 'Application flowchart planning',
                Image2: 'Sequence of events in databricks space'
            },
            'project-galleries/ExtraImages_VEXRobot/': {
                Image1: 'Racheting side intake wheels',
                Image2: 'Final design being fitted on the competition floor'
            },
            'project-galleries/ExtraImages_Rover/': {
                Image1: '1:3 scale 3D printed kinematic model',
                Image2: 'Linkage system fitting for side rocker',
                Image3: 'Airless flexible wheels using tape for extra grip',
                Image4: 'Back Rocker System'
            }
        };

        // Load captions from text files - PRIMARY SOURCE
        async function loadImageCaptions(images, folderPath) {
            console.log('Loading captions for folder:', folderPath);
            for (let i = 0; i < images.length; i++) {
                try {
                    const imageName = images[i].src.split('/').pop().split('.')[0];
                    const captionPath = `${folderPath}${imageName}.txt`;
                    console.log(`Loading caption for ${imageName} from: ${captionPath}`);
                    
                    // If running locally via file://, use embedded captions manifest
                    if (IS_FILE_ORIGIN) {
                        const localCaption = (LOCAL_CAPTIONS[folderPath] && LOCAL_CAPTIONS[folderPath][imageName]) || '';
                        if (localCaption) {
                            images[i].description = localCaption;
                            console.log(`✅ (local) Updated description for ${imageName}:`, images[i].description);
                        } else {
                            images[i].description = `Project image ${i + 1}`;
                            console.log(`⚠️ (local) Missing caption for ${imageName}, using fallback`);
                        }
                        continue;
                    }

                    // Hosted path: fetch from text files
                    const response = await fetch(captionPath);
                    console.log(`Response status for ${imageName}:`, response.status);
                    
                    if (response.ok) {
                        const caption = await response.text();
                        console.log(`Raw caption for ${imageName}:`, JSON.stringify(caption));
                        console.log(`Trimmed caption for ${imageName}:`, JSON.stringify(caption.trim()));
                        
                        if (caption.trim()) {
                            images[i].description = caption.trim();
                            console.log(`✅ Updated description for ${imageName}:`, images[i].description);
                        } else {
                            // Empty file: try manifest fallback then generic
                            const localCaption = (LOCAL_CAPTIONS[folderPath] && LOCAL_CAPTIONS[folderPath][imageName]) || '';
                            images[i].description = localCaption || `Project image ${i + 1}`;
                            console.log(`⚠️ Empty caption for ${imageName}, using ${localCaption ? 'manifest fallback' : 'generic'} caption`);
                        }
                    } else {
                        // Fetch failed: try manifest fallback then generic
                        const localCaption = (LOCAL_CAPTIONS[folderPath] && LOCAL_CAPTIONS[folderPath][imageName]) || '';
                        images[i].description = localCaption || `Project image ${i + 1}`;
                        console.log(`❌ Failed to load caption for ${imageName}, using ${localCaption ? 'manifest fallback' : 'generic'} caption`);
                    }
                } catch (error) {
                    // Network error: try manifest fallback then generic
                    const imageName = images[i].src.split('/').pop().split('.')[0];
                    const localCaption = (LOCAL_CAPTIONS[folderPath] && LOCAL_CAPTIONS[folderPath][imageName]) || '';
                    images[i].description = localCaption || `Project image ${i + 1}`;
                    console.log(`❌ Error loading caption for ${images[i].src}, using ${localCaption ? 'manifest fallback' : 'generic'} caption:`, error);
                }
            }
            console.log('Final images array:', images);
        }

        // Load project images function
        async function loadProjectImages(projectName, container) {
            // Map project names to their folder names
            const projectFolderMap = {
                '3dprinter': 'ExtraImages_3DPrinter',
                'drone': 'ExtraImages_Drone',
                'epiccamp': 'ExtraImages_EPICCamp',
                'genie': 'ExtraImages_GenieChatbot',
                'hydroponics': 'ExtraImages_Hydroponics',
                'overpass': 'ExtraImages_Overpass',
                'rover': 'ExtraImages_Rover',
                'vex': 'ExtraImages_VEXRobot',
                'vtol': 'ExtraImages_VTOL',
                'chickencoop': 'ExtraImages_ChickenCoop'
            };
            
            const folderName = projectFolderMap[projectName];
            if (!folderName) return;
            
            // 3D printer project images
            if (projectName === '3dprinter') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_3DPrinter/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_3DPrinter/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_3DPrinter/Image3.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                // Load captions from text files - PRIMARY SOURCE
                await loadImageCaptions(images, 'project-galleries/ExtraImages_3DPrinter/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)'; // Scale border 1.15x
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none'; // Disable all interactions
                    imageCard.style.transform = 'none'; // Override hover transform
                    imageCard.style.transition = 'none'; // Override hover transition
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }
            
            // Drone project images
            if (projectName === 'drone') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_Drone/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Drone/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Drone/Image3.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Drone/Image4.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                // Load captions from text files - PRIMARY SOURCE
                await loadImageCaptions(images, 'project-galleries/ExtraImages_Drone/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)'; // Scale border 1.15x
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none'; // Disable all interactions
                    imageCard.style.transform = 'none'; // Override hover transform
                    imageCard.style.transition = 'none'; // Override hover transition
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }
            
            // Hydroponics project images
            if (projectName === 'hydroponics') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_Hydroponics/Image1.jpg',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Hydroponics/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Hydroponics/Image3.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Hydroponics/Image4.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                // Load captions from text files - PRIMARY SOURCE
                await loadImageCaptions(images, 'project-galleries/ExtraImages_Hydroponics/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)'; // Scale border 1.15x
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none'; // Disable all interactions
                    imageCard.style.transform = 'none'; // Override hover transform
                    imageCard.style.transition = 'none'; // Override hover transition
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }

            // VTOL project images
            if (projectName === 'vtol') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_VTOL/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_VTOL/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_VTOL/Image3.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_VTOL/Image4.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                // Load captions from text files - PRIMARY SOURCE
                await loadImageCaptions(images, 'project-galleries/ExtraImages_VTOL/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)';
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none';
                    imageCard.style.transform = 'none';
                    imageCard.style.transition = 'none';
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }

            // Overpass project images
            if (projectName === 'overpass') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_Overpass/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Overpass/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Overpass/Image3.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Overpass/Image4.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                // Load captions from text files - PRIMARY SOURCE
                await loadImageCaptions(images, 'project-galleries/ExtraImages_Overpass/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)';
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none';
                    imageCard.style.transform = 'none';
                    imageCard.style.transition = 'none';
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }

            // Genie Chatbot project images
            if (projectName === 'genie') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_GenieChatbot/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_GenieChatbot/Image2.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                await loadImageCaptions(images, 'project-galleries/ExtraImages_GenieChatbot/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)';
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none';
                    imageCard.style.transform = 'none';
                    imageCard.style.transition = 'none';
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }

            // VEX Robot project images
            if (projectName === 'vex') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_VEXRobot/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_VEXRobot/Image2.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                await loadImageCaptions(images, 'project-galleries/ExtraImages_VEXRobot/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)';
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none';
                    imageCard.style.transform = 'none';
                    imageCard.style.transition = 'none';
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }

            // Rover project images
            if (projectName === 'rover') {
                const images = [
                    {
                        src: 'project-galleries/ExtraImages_Rover/Image1.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Rover/Image2.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Rover/Image3.png',
                        description: '' // Will be loaded from text file
                    },
                    {
                        src: 'project-galleries/ExtraImages_Rover/Image4.png',
                        description: '' // Will be loaded from text file
                    }
                ];
                
                await loadImageCaptions(images, 'project-galleries/ExtraImages_Rover/');
                
                images.forEach(imageData => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'project-card gallery-card';
                    imageCard.style.width = '100%';
                    imageCard.style.height = 'auto';
                    imageCard.style.backgroundColor = 'var(--card-bg)';
                    imageCard.style.border = (1 * 1.15) + 'px solid var(--border-color)';
                    imageCard.style.borderRadius = '8px';
                    imageCard.style.overflow = 'hidden';
                    imageCard.style.cursor = 'default';
                    imageCard.style.pointerEvents = 'none';
                    imageCard.style.transform = 'none';
                    imageCard.style.transition = 'none';
                    
                    const imageContainer = document.createElement('div');
                    imageContainer.style.height = '200px';
                    imageContainer.style.backgroundColor = 'var(--darker-bg)';
                    imageContainer.style.borderBottom = '2px solid var(--border-color)';
                    imageContainer.style.display = 'flex';
                    imageContainer.style.alignItems = 'center';
                    imageContainer.style.justifyContent = 'center';
                    imageContainer.style.overflow = 'hidden';
                    
                    const img = document.createElement('img');
                    img.src = imageData.src;
                    img.alt = imageData.description;
                    img.loading = 'lazy';
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.objectPosition = 'center';
                    
                    const description = document.createElement('div');
                    description.style.padding = '1rem';
                    description.style.backgroundColor = 'var(--card-bg)';
                    description.style.fontSize = '0.9rem';
                    description.style.color = 'var(--text-secondary)';
                    description.style.lineHeight = '1.4';
                    description.textContent = imageData.description;
                    
                    imageContainer.appendChild(img);
                    imageCard.appendChild(imageContainer);
                    imageCard.appendChild(description);
                    container.appendChild(imageCard);
                });
            }
        }
    </script>
</body>
</html>

